import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import useToastContent from './usetoast.html'
import useMultipleContent from './multiple.html'

<Meta title="Theme/JavaScript/Components/useToast" />

# useToast JavaScript usage

**useToast** is accessible through `window.Theme.components.useToast`.

## Options

**type**:  'light' | 'dark' | 'primary' | 'secondary' | 'info' | 'success' | 'warning' | 'danger'   
**autohide** (Optional): boolean;  
**delay** (Optional): number;  
**classlist** (Optional): string;  
**template** (Optional): string;  

### Examples (only testable inside the Canvas tab)
Overall destructuring is a good practice, if you can, use it!

Without any options:

<Canvas>
  <Story 
    name="Basic usage" 
    parameters={{ docs: { source: { code: useToastContent } } }} 
    play={async ({canvasElement}) => {
      const btn = document.querySelector('.btn');
      btn.addEventListener('click', () => {
        const {show} = window.Theme.components.useToast('Test');
        show();
      });
    }}
  >
    {() =>  useToastContent}
  </Story>
</Canvas>  

Without a different colorscheme:

```js
const {show} = window.Theme.components.useToast('Test', {type: 'primary'});
show();
```

<Canvas>
  <Story 
    name="with primary parameter" 
    parameters={{ docs: { source: { code: useToastContent } } }} 
    play={async ({canvasElement}) => {
      const btn = document.querySelector('.btn');
      btn.addEventListener('click', () => {
        const {show} = window.Theme.components.useToast('Test', {type: 'primary'});
        show();
      });
    }}
  >
    {() =>  useToastContent}
  </Story>
</Canvas>  

Without autohide:

```js
const {show} = window.Theme.components.useToast('Test', {autohide: false});
show();
```

<Canvas>
  <Story 
    name="without autohide" 
    parameters={{ docs: { source: { code: useToastContent } } }} 
    play={async ({canvasElement}) => {
      const btn = document.querySelector('.btn');
      btn.addEventListener('click', () => {
        const {show} = window.Theme.components.useToast('Test', {autohide: false});
        show();
      });
    }}
  >
    {() =>  useToastContent}
  </Story>
</Canvas>  


With template overridden:

```js
const myTemplate = `
  <div class="toast toast--override">
    <div class="toast-header">My header text</div>
    <div class="toast-body"></div>
  </div>
`
const {show} = window.Theme.components.useToast('Test', {template: myTemplate});
show();
```

<Canvas>
  <Story 
    name="with template overridden" 
    parameters={{ docs: { source: { code: useToastContent } } }} 
    play={async ({canvasElement}) => {
      const myTemplate = `
        <div class="toast toast--override">
          <div class="toast-header">My header text</div>
          <div class="toast-body"></div>
        </div>
      `
      const btn = document.querySelector('.btn');
      btn.addEventListener('click', () => {
        const {show} = window.Theme.components.useToast('Test', {template: myTemplate});
        show();
      });
    }}
  >
    {() =>  useToastContent}
  </Story>
</Canvas>  

Use multiple toasts at the same time:

```js
const {useToast} = window.Theme.components;

const btnPrimary = document.querySelector('.btn-primary');
const btnSecondary = document.querySelector('.btn-secondary');

const {show: showPrimaryToast} = useToast('Test with primary', {type: 'primary'});
const {show: showSecondaryToast} = useToast('Test with secondary', {type: 'secondary'});

btnPrimary.addEventListener('click', () => {
  showPrimaryToast();
});

btnSecondary.addEventListener('click', () => {
  showSecondaryToast();
});
```

<Canvas>
  <Story 
    name="multiple toasts at the same time" 
    parameters={{ docs: { source: { code: useMultipleContent } } }} 
    play={async ({canvasElement}) => {
      const {useToast} = window.Theme.components;
      const btnPrimary = document.querySelector('.btn-primary');
      const btnSecondary = document.querySelector('.btn-secondary');
      const {show: showPrimaryToast} = useToast('Test with primary', {type: 'primary'});
      const {show: showSecondaryToast} = useToast('Test with secondary', {type: 'secondary'});
      btnPrimary.addEventListener('click', () => {
        showPrimaryToast();
      });
      btnSecondary.addEventListener('click', () => {
        showSecondaryToast();
      });
    }}
  >
    {() =>  useMultipleContent}
  </Story>
</Canvas>  
